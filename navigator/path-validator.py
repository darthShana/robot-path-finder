from matplotlib import pyplot as plt
import numpy as np
from geometry.Point import Point
from geometry.Vector import Vector

waypoints = np.array([
    [0,0],
    [0.464738, 1.03659]
    # [1.327786, 1.003449]
])

x, y = waypoints.T
fig = plt.figure(figsize=(8, 8))
plt.gca().set_aspect('equal', adjustable='box')
plt.scatter(x, y, marker='+')
plt.pause(0.05)

real_set = np.array([
    [3.4e-05,-8e-06, 0, 1 ,0.464704, 1.036598],
    [-0.000709,0.000268, -0.000743, 0.000276 ,0.465447, 1.036322],
    [-0.000627,0.000436, -0.0006609999999999999, 0.0003218227045658606 ,0.465365, 1.0361539999999998],
    [0.00053,0.000749, -0.0006609999999999999, 0.0003218227045658606 ,0.464208, 1.0358409999999998],
    [0.000119,-0.001581, -0.0006609999999999999, 0.0003218227045658606 ,0.464619, 1.038171],
    [0.000651,0.000948, -0.0006609999999999999, 0.0003218227045658606 ,0.46408699999999997, 1.035642],
    [0.000456,-0.001508, -0.0006609999999999999, 0.0003218227045658606 ,0.464282, 1.038098],
    [0.00063,-0.00043, -0.0006609999999999999, 0.0003218227045658606 ,0.46410799999999997, 1.0370199999999998],
    [0.00032,-0.000438, -0.0006609999999999999, 0.0003218227045658606 ,0.464418, 1.0370279999999998],
    [-0.00023,-0.001631, -0.000349, -0.0007450592161736935 ,0.464968, 1.0382209999999998],
    [0.000751,-0.000107, -0.000349, -0.0007450592161736935 ,0.463987, 1.036697],
    [0.000194,-0.002349, -0.000349, -0.0007450592161736935 ,0.46454399999999996, 1.0389389999999998],
    [-0.001024,-0.002481, -0.001654, -0.002141558456424394 ,0.465762, 1.0390709999999999],
    [-0.00122,-0.001166, -0.001654, -0.002141558456424394 ,0.465958, 1.037756],
    [-0.001252,-0.00123, -0.001654, -0.002141558456424394 ,0.46598999999999996, 1.03782],
    [-0.000808,-0.000314, -0.001654, -0.002141558456424394 ,0.46554599999999996, 1.0369039999999998],
    [0.000348,0.001016, -0.001654, -0.002141558456424394 ,0.46438999999999997, 1.035574],
    [0.000166,0.00099, 0.0011899999999999999, 0.0020194030742193233 ,0.464572, 1.0355999999999999],
    [0.000761,0.002143, 0.001981, 0.003074570512568349 ,0.463977, 1.034447],
    [0.001043,0.000951, 0.002295, 0.0027263471277824266 ,0.46369499999999997, 1.035639],
    [0.003736,0.00067, 0.002295, 0.0027263471277824266 ,0.46100199999999997, 1.03592],
    [0.006093,0.007911, 0.005745, 0.005306998544426754 ,0.45864499999999997, 1.028679],
    [0.006957,0.015342, 0.006790999999999999, 0.011600410046086225 ,0.457781, 1.021248],
    [0.010227,0.023043, 0.009466, 0.021830371405920274 ,0.454511, 1.013547],
    [0.014425,0.02132, 0.013382, 0.02515582486538689 ,0.45031299999999996, 1.01527],
    [0.008919,0.035086, 0.013382, 0.02515582486538689 ,0.455819, 1.001504],
    [0.005595,0.038513, 0.013382, 0.02515582486538689 ,0.45914299999999997, 0.9980769999999999],
    [0.012761,0.036942, 0.013382, 0.02515582486538689 ,0.45197699999999996, 0.9996479999999999],
    [0.026888,0.051911, 0.013382, 0.02515582486538689 ,0.43784999999999996, 0.9846789999999999],
    [0.029613,0.072795, 0.015188, 0.02111716801446934 ,0.435125, 0.963795],
    [0.019537,0.068407, 0.010617999999999999, 0.014693416713414328 ,0.44520099999999996, 0.9681829999999999],
    [0.033135,0.074584, 0.02754, 0.0368073731323873 ,0.43160299999999996, 0.9620059999999999],
    [0.014553,0.095425, 0.02754, 0.0368073731323873 ,0.450185, 0.9411649999999999],
    [0.021789,0.113189, 0.02754, 0.0368073731323873 ,0.442949, 0.9234009999999999],
    [0.021977,0.133676, 0.02754, 0.0368073731323873 ,0.44276099999999996, 0.9029139999999999],
    [0.022263,0.145903, 0.02754, 0.0368073731323873 ,0.442475, 0.8906869999999999],
    [0.024647,0.163727, 0.02754, 0.0368073731323873 ,0.440091, 0.8728629999999999],
    [0.024931,0.187414, 0.010377999999999998, 0.07950155700723054 ,0.439807, 0.8491759999999999],
    [0.018856,0.22205, 0.010377999999999998, 0.07950155700723054 ,0.445882, 0.8145399999999999],
    [0.043282,0.221849, 0.010377999999999998, 0.07950155700723054 ,0.421456, 0.8147409999999999],
    [0.061106,0.294332, 0.038843, 0.10304239870090193 ,0.403632, 0.7422579999999999],
    [0.071181,0.289798, 0.04653399999999999, 0.10008320331992357 ,0.393557, 0.7467919999999999],
    [0.092427,0.316175, 0.067496, 0.1134290708371081 ,0.372311, 0.7204149999999999],
    [0.09731,0.322134, 0.078454, 0.11088092775997507 ,0.367428, 0.714456],
    [0.108293,0.343997, 0.065011, 0.10474574534109432 ,0.356445, 0.6925929999999999],
    [0.111685,0.353963, 0.050579000000000006, 0.06139983673106808 ,0.35305299999999995, 0.6826269999999999],
    [0.130817,0.401338, 0.059635999999999995, 0.11138501320611804 ,0.333921, 0.6352519999999999],
    [0.159709,0.430949, 0.067282, 0.12110065068316511 ,0.305029, 0.6056409999999999],
    [0.159665,0.436277, 0.06235500000000001, 0.10992991378517852 ,0.305073, 0.6003129999999999],
    [0.180134,0.452451, 0.07184099999999999, 0.1089990845079763 ,0.28460399999999997, 0.584139],
    [0.192137,0.485675, 0.080452, 0.11882857628009219 ,0.272601, 0.5509149999999998],
    [0.201602,0.498961, 0.07078500000000001, 0.0976401949754771 ,0.263136, 0.5376289999999999],
    [0.210481,0.506572, 0.05077200000000001, 0.07684455032606696 ,0.25425699999999996, 0.5300179999999999],
    [0.220044,0.511654, 0.06037899999999999, 0.08310461897601584 ,0.244694, 0.5249359999999998],
    [0.233476,0.510594, 0.053342, 0.05552128068901546 ,0.231262, 0.5259959999999999],
    [0.24979,0.528515, 0.05765300000000001, 0.03681008777228778 ,0.21494799999999997, 0.5080749999999999],
    [0.25753,0.532267, 0.05592799999999998, 0.03161300532498801 ,0.207208, 0.5043229999999999],
    [0.265371,0.538613, 0.05489000000000002, 0.032588194862069764 ,0.19936699999999996, 0.4979769999999999],
    [0.263343,0.53801, 0.043299000000000004, 0.02911369638510619 ,0.201395, 0.4985799999999999],
    [0.265184,0.53877, 0.031707999999999986, 0.027501154558893237 ,0.199554, 0.49781999999999993],
    [0.256252,0.531752, 0.006461999999999968, 0.004527384716086491 ,0.208486, 0.5048379999999999],
    [0.27871,0.549287, 0.021180000000000032, 0.016691372363800694 ,0.18602799999999997, 0.48730299999999993],
    [0.281862,0.552296, 0.016490999999999978, 0.01302421224830852 ,0.18287599999999998, 0.4842939999999999],
    [0.274424,0.546324, 0.011081000000000008, 0.008724945254396932 ,0.19031399999999998, 0.49026599999999987],
    [0.275171,0.546946, 0.009987000000000024, 0.007962462277364413 ,0.18956699999999999, 0.48964399999999986],
    [0.283275,0.553067, 0.02702300000000002, 0.021406865966964395 ,0.18146299999999999, 0.4835229999999999],
    [0.280803,0.551, 0.0020930000000000115, 0.0016083867367339133 ,0.18393499999999996, 0.48558999999999986],
    [0.272747,0.544607, -0.009114999999999984, -0.007205285548996243 ,0.19199099999999997, 0.49198299999999995],
    [0.281453,0.551648, 0.0070290000000000075, 0.005466530284943594 ,0.18328499999999998, 0.4849419999999999],
    [0.283843,0.55359, 0.008672000000000013, 0.006847143979572978 ,0.18089499999999997, 0.4829999999999999],
    [0.284325,0.554172, 0.0010499999999999954, 0.0008559062707711451 ,0.180413, 0.4824179999999999],
    [0.2781,0.549001, -0.002703000000000011, -0.002205170459465333 ,0.18663799999999997, 0.48758899999999994],
    [0.269214,0.54247, -0.0035330000000000084, -0.002759434302713193 ,0.19552399999999998, 0.4941199999999999],
    [0.279146,0.550129, -0.0023070000000000035, -0.0017696333840943046 ,0.18559199999999998, 0.4864609999999999],
    [0.284017,0.554058, 0.00017400000000000748, 0.00013503868250897 ,0.18072099999999997, 0.48253199999999985],
    [0.287904,0.55722, 0.003578999999999999, 0.002827228047604824 ,0.176834, 0.47936999999999985],
    [0.291378,0.559413, 0.013278000000000012, 0.010333228725440513 ,0.17335999999999996, 0.47717699999999985],
    [0.290984,0.558045, 0.02177000000000001, 0.016277916485167965 ,0.17375399999999996, 0.4785449999999999],
    [0.291031,0.580967, 0.02177000000000001, 0.016277916485167965 ,0.173707, 0.4556229999999999],
    [0.291935,0.58231, 0.02177000000000001, 0.016277916485167965 ,0.17280299999999998, 0.4542799999999999],
    [0.291937,0.581843, 0.02177000000000001, 0.016277916485167965 ,0.17280099999999998, 0.4547469999999999],
    [0.293076,0.581956, 0.02177000000000001, 0.016277916485167965 ,0.17166199999999998, 0.45463399999999987],
    [0.292796,0.58161, 0.02177000000000001, 0.016277916485167965 ,0.17194199999999998, 0.45497999999999994],
    [0.293164,0.582101, 0.02177000000000001, 0.016277916485167965 ,0.171574, 0.4544889999999999],
    [0.291691,0.581681, 0.02177000000000001, 0.016277916485167965 ,0.173047, 0.4549089999999999],
    [0.29668,0.586475, 0.004742999999999997, 0.0047914236151533895 ,0.16805799999999999, 0.45011499999999993],
    [0.316444,0.602528, 0.023368, 0.02026383447541935 ,0.14829399999999998, 0.43406199999999995],
    [0.300951,0.622172, 0.023368, 0.02026383447541935 ,0.16378699999999996, 0.41441799999999995],
    [0.296412,0.645279, 0.023368, 0.02026383447541935 ,0.16832599999999998, 0.39131099999999985],
    [0.275253,0.67813, 0.023368, 0.02026383447541935 ,0.18948499999999996, 0.3584599999999999],
    [0.281029,0.684943, -0.015651000000000026, 0.03443736445947343 ,0.183709, 0.35164699999999993],
    [0.278468,0.711794, -0.03797600000000001, 0.09189937338060206 ,0.18627, 0.32479599999999986],
    [0.28483,0.719812, -0.016120999999999996, 0.04603691642916752 ,0.17990799999999996, 0.3167779999999999],
    [0.294001,0.748301, -0.016120999999999996, 0.04603691642916752 ,0.17073699999999997, 0.2882889999999999],
    [0.317049,0.785509, 0.041796, 0.10270919608531692 ,0.14768899999999996, 0.2510809999999999],
    [0.310513,0.791896, 0.02948400000000001, 0.07371591078594641 ,0.154225, 0.24469399999999986],
    [0.309169,0.796876, 0.030701000000000034, 0.0716156261598746 ,0.15556899999999996, 0.23971399999999987],
    [0.326538,0.806599, 0.04170799999999997, 0.08628822859521967 ,0.1382, 0.22999099999999995],
    [0.344648,0.809714, 0.050647, 0.05433323255766953 ,0.12008999999999997, 0.22687599999999986],
    [0.318878,0.877168, 0.050647, 0.05433323255766953 ,0.14586, 0.15942199999999995],
    [0.35651,0.927846, 0.050647, 0.05433323255766953 ,0.10822799999999999, 0.10874399999999995],
    [0.348754,0.947208, 0.050647, 0.05433323255766953 ,0.11598399999999998, 0.08938199999999985],
    [0.350136,0.975624, 0.050647, 0.05433323255766953 ,0.11460199999999998, 0.060965999999999854],
    [0.356097,1.018315, 0.050647, 0.05433323255766953 ,0.10864099999999999, 0.01827499999999982],
    [0.376918,1.043049, 0.05803999999999998, 0.16247992863143057 ,0.08782000000000001, -0.0064589999999999925],
    [0.419076,1.049248, 0.06256600000000001, 0.08496196761919295 ,0.04566199999999998, -0.012658000000000058]
])

v1 = Vector(Point(0,0), Point(-0.000476, 0.00028907))
v2 = Vector(Point(0,0), Point(0.079737, -0.130236))
print(v1.clockwise_angle_between(v2))
print(v1.clockwise_angle_between(v2) > np.pi)

x, y, hx, hy, rx, ry = real_set.T
plt.quiver(x, y, hx, hy, color='b')
plt.quiver(x, y, rx, ry, color='r')
plt.pause(0.05)

# plt.plot(0, 0, 'bo')
# plt.plot(v1[0], v1[1], 'ro')
# plt.plot(v2[0], v2[1], 'ro')
# plt.plot(0.002772, 0.00128472, 'bo')
# plt.plot(0.078554, 0.102219, 'bo')
# plt.pause(0.05)

input("Press Enter to continue...")
