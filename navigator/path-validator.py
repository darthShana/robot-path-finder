from matplotlib import pyplot as plt
import numpy as np
from geometry.Point import Point
from geometry.Vector import Vector

waypoints = np.array([
    [0.183259,0.441623],
    [0.339158,0.706729],
    [0.573945,0.966652],

])

x, y = waypoints.T
fig = plt.figure(figsize=(8, 8))
plt.gca().set_aspect('equal', adjustable='box')
plt.scatter(x, y, marker='+')
plt.pause(0.05)

real_set = np.array([
    [0.285748,0.620941, 0.04031,0.07589677 ,0.05341,0.085788],
    [0.295726,0.665697, 0.040527,0.0902711 ,0.043432, 0.041032],
    [0.302549,0.676516, 0.035921, 0.10171644 ,0.271396, 0.290136],
    [0.317577,0.726216, 0.00976,0.02342187 ,0.256368, 0.240436],
    [0.312612,0.722602, -0.000375,0.003933 ,0.261333, 0.24405],
    [0.310491,0.724177, -0.002496, -0.00118115 ,0.263454, 0.242475],
    [0.323483,0.736174, 0.009417, 0.00944091 ,0.250462, 0.230478],
    [0.325816,0.746548, 0.002333, 0.00388178 ,0.248129, 0.220104],
    [0.325526,0.747911, 0.000643, 0.00181974 ,0.248419, 0.218741],
    [0.330486,0.749199, 0.005742, 0.01035532 ,0.243459, 0.217453],
    [0.33557,0.748416, 0.011444, 0.00971609 ,0.238375, 0.218236],
    [0.326201,0.75333, 0.013214, 0.034661 ,0.247744, 0.213322],
    [0.3269,0.748882, 0.013913, 0.030213 ,0.247045, 0.21777],
    [0.331757,0.750463, 0.01877,0.031794 ,0.242188, 0.216189],
    [0.327611,0.755343, -0.002875,0.00130649 ,0.246334, 0.211309],
    [0.326886,0.766815, -0.008684,0.00785526 ,0.247059, 0.199837],
    [0.339955,0.798637, 0.013754, 0.04072404 ,0.23399,0.168015],
    [0.339092,0.798851, 0.012206, 0.02883916 ,0.234853, 0.167801],
    [0.339608,0.799494, -0.000347, -0.000214 ,0.234337, 0.167158],
    [0.341579,0.797936, 0.00382,0.00131928 ,0.232366, 0.168716],
    [0.341892,0.79849, 0.000989, -0.00032838 ,0.232053, 0.168162],
    [0.338699,0.798106, 0.011813, 0.031291 ,0.235246, 0.168546],
    [0.351895,0.81395, 0.012287, 0.01418477 ,0.22205,0.152702],
    [0.337406,0.839548, -0.014489,0.025598 ,0.236539, 0.127104],
    [0.35029,0.850688, -0.001605,0.036738 ,0.223655, 0.115964],
    [0.362536,0.871145, 0.023837, 0.04730405 ,0.211409, 0.095507],
    [0.357431,0.917024, 0.016481, 0.04383968 ,0.216514, 0.049628],
    [0.369985,0.939917, 0.01809, 0.05676169 ,0.20396, 0.026735],
    [0.382271,0.933986, 0.044865, 0.10657385 ,0.191674, 0.032666],
    [0.380804,0.934923, 0.018268, 0.02798847 ,0.193141, 0.031729],
    [0.379249,0.933874, 0.021818,0.0127438 ,0.194696, 0.032778],
    [0.380361,0.934521, 0.010376, -0.00528909 ,0.193584, 0.032131],
    [0.383552,0.938466, 0.001281, 0.00114233 ,0.190393, 0.028186],
    [0.38762,0.941853, 0.007514, 0.00774649 ,0.186325, 0.024799],
    [0.390574,0.948349, 0.00977, 0.01198343 ,0.183371, 0.018303],
    [0.428412,1.005264, 0.048051, 0.06776067 , 0.145533, -0.038612],
    [0.432744,1.029304, 0.045124, 0.07773607 , 0.141201, -0.062652],
    [0.431685,1.028804, 0.019827, 0.05474122 , 0.14226,-0.062152],
    [0.431801,1.029017, 0.003389, 0.01628075 , 0.142144, -0.062365],
    [0.431875,1.028259, -0.000869, -0.00033356 , 0.14207,-0.061607],
    [0.432307,1.029778, 0.000622, 0.00020508 , 0.141638, -0.063126],
    [0.427179,1.03799, -0.004622, 0.00619124 , 0.146766, -0.071338],
    [0.448496,1.04275, 0.015109, 0.00720608 , 0.125449, -0.076098],
    [0.460757,1.043965, 0.028882, 0.01200991 , 0.113188, -0.077313],
    [0.49193,1.075735, 0.059623, 0.03588784 , 0.082015, -0.109083],
    [0.490761,1.098608, 0.063582, 0.05201639 , 0.083184, -0.131956],
    [0.496344,1.0994, 0.047848, 0.05956688 , 0.077601, -0.132748],
    [0.494684,1.098249, 0.033927, 0.05384488 , 0.079261, -0.131597],
    [0.491101,1.101375, 0.02163,0.039306 , 0.082844, -0.134723],
    [0.495749,1.100522, 0.003819, 0.024787 , 0.078196, -0.13387],
    [0.492448,1.10193, 0.000518, 0.026195 , 0.081497, -0.135278],
    [0.493369,1.100171, -0.002975,0.00127977 , 0.080576, -0.133519],
    [0.494208,1.096888, -0.000476,0.00028907 , 0.079737,-0.130236],
    [0.494996,1.098502,0.003895, -0.00228424 , 0.078949, -0.13185],
    [0.495305,1.105045, 0.003375, 0.02931, 0.07864,-0.138393],
    [0.508021,1.117447, 0.015573, 0.01838972 , 0.065924, -0.150795],
    [0.498516,1.145794, 0.005147, 0.00814896 , 0.075429, -0.179142],
    [0.515826,1.163455, 0.021618, 0.05171817 , 0.058119, -0.196803],
    [0.548526,1.194364, 0.053221, 0.08639094 , 0.025419, -0.227712],
    [0.543881,1.196427, 0.03586,0.05102078 , 0.030064, -0.229775],
    [0.541086,1.199457, 0.04257,0.04824259 , 0.032859, -0.232805],
    [0.53993,1.201544,0.002215, -0.00151422 , 0.034015, -0.234892],
    [0.542394,1.19978, -0.006132,0.00514821 , 0.031551, -0.233128],
    [0.539023,1.199938, -0.002063,0.00079322 , 0.034922, -0.233286],
    [0.549221,1.211855, 0.008667, 0.00845072 , 0.024724, -0.245203],
    [0.549853,1.219279, 0.009923, 0.01367145 , 0.024092, -0.252627],
    [0.556519,1.239141, 0.014125, 0.02798447 , 0.017426, -0.272489],
    [0.551886,1.26031, 0.01413,0.03498694 , 0.022059, -0.293658],
    [0.578768,1.269571, 0.039745,0.0678357 ,-0.004823, -0.302919],
    [0.607587,1.32447, 0.051068, 0.07249783 ,-0.033642, -0.357818],
    [0.607286,1.324545, 0.0554, 0.07076207 ,-0.033341, -0.357893]
])

v1 = Vector(Point(0,0), Point(-0.000476, 0.00028907))
v2 = Vector(Point(0,0), Point(0.079737, -0.130236))
print(v1.clockwise_angle_between(v2))
print(v1.clockwise_angle_between(v2) > np.pi)

x, y, hx, hy, rx, ry = real_set.T
plt.quiver(x, y, hx, hy, color='b')
plt.quiver(x, y, rx, ry, color='r')
plt.pause(0.05)

# plt.plot(0, 0, 'bo')
# plt.plot(v1[0], v1[1], 'ro')
# plt.plot(v2[0], v2[1], 'ro')
# plt.plot(0.002772, 0.00128472, 'bo')
# plt.plot(0.078554, 0.102219, 'bo')
# plt.pause(0.05)

input("Press Enter to continue...")
