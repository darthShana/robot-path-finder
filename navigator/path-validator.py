from matplotlib import pyplot as plt
import numpy as np
from geometry.Point import Point
from geometry.Vector import Vector

waypoints = np.array([
    [0.339158,0.706729],
    [0.573945,0.966652],
    [0.669111,1.015304]
])

x, y = waypoints.T
fig = plt.figure(figsize=(8, 8))
plt.gca().set_aspect('equal', adjustable='box')
plt.scatter(x, y, marker='+')
plt.pause(0.05)

real_set = np.array([
    [0.313387,0.648934, 0.04727700000000001, 0.07362734570946894 ,0.02577099999999999, 0.05779500000000004],
    [0.306655,0.662569, -0.006732000000000016, 0.013634999999999953 ,0.26729, 0.304083],
    [0.305745,0.676695, -0.007642000000000038, 0.027761000000000036 ,0.26820000000000005, 0.2899569999999999],
    [0.309935,0.69205, -0.007514999999999994, 0.04952281519749313 ,0.26401, 0.2746019999999999],
    [0.322318,0.704804, 0.008930999999999967, 0.055869999999999975 ,0.25162700000000005, 0.26184799999999997],
    [0.3255,0.708275, 0.003182000000000018, 0.003471000000000002 ,0.24844500000000003, 0.25837699999999997],
    [0.338237,0.712368, 0.031582, 0.04233135196487359 ,0.23570800000000003, 0.25428399999999995],
    [0.341222,0.711246, 0.035477000000000036, 0.03126304472058272 ,0.232723, 0.2554059999999999],
    [0.338025,0.715761, 0.028090000000000004, 0.018132182070900837 ,0.23592000000000002, 0.250891],
    [0.361232,0.741334, 0.035731999999999986, 0.028925844663822864 ,0.21271300000000004, 0.2253179999999999],
    [0.361589,0.750208, 0.023351999999999984, 0.027424836076747283 ,0.21235600000000004, 0.21644399999999997],
    [0.356623,0.762836, 0.015400999999999998, 0.02037343563444527 ,0.21732200000000002, 0.203816],
    [0.357328,0.773021, -0.0039040000000000186, 0.03168699999999991 ,0.21661700000000006, 0.193631],
    [0.363189,0.795866, 0.0019569999999999865, 0.054531999999999914 ,0.21075600000000005, 0.170786],
    [0.359547,0.819749, -0.0036419999999999786, 0.023882999999999988 ,0.21439800000000003, 0.146903],
    [0.434087,0.846096, 0.072498, 0.06460036640827194 ,0.13985800000000004, 0.120556],
    [0.496108,0.951809, 0.136561, 0.13625762839134725 ,0.07783700000000005, 0.01484299999999994],
    [0.522935,0.992942, 0.08884800000000004, 0.13803364243118466 ,0.05101, -0.026290000000000036],
    [0.580111,1.067935, 0.04491500000000004, 0.058425768461126903 ,0.08899999999999997, -0.052631000000000094],
    [0.575673,1.071271, 0.010450999999999988, 0.005392999999999981 ,0.09343800000000002, -0.0559670000000001],
    [0.572366,1.069878, 0.001092000000000093, -0.00035415727389898066 ,0.09674499999999997, -0.05457400000000012],
    [0.572564,1.068938, 0.00734199999999996, 0.0030599999999998406 ,0.09654700000000005, -0.05363399999999996],
    [0.584383,1.065969, 0.003418000000000032, -0.0009414204748878774 ,0.08472800000000003, -0.05066499999999996],
    [0.590512,1.076273, 0.025290000000000035, 0.010394999999999932 ,0.07859899999999997, -0.06096900000000005],
    [0.579533,1.0652, 0.014310999999999963, -0.0006780000000001785 ,0.08957800000000005, -0.04989599999999994],
    [0.589113,1.071724, 0.023890999999999996, 0.005845999999999796 ,0.07999800000000001, -0.056419999999999915],
    [0.581783,1.072241, 0.016561000000000048, 0.0063629999999998965 ,0.08732799999999996, -0.056937000000000015],
    [0.58151,1.083318, 0.01628799999999997, 0.0174399999999999 ,0.08760100000000004, -0.06801400000000002],
    [0.58393,1.09028, 0.018707999999999947, 0.024401999999999813 ,0.08518100000000006, -0.07497599999999993],
    [0.589068,1.102524, 0.007668000000000008, 0.021781361371800534 ,0.08004299999999998, -0.08722000000000008],
    [0.597878,1.098466, 0.014135000000000009, 0.015003921908359974 ,0.07123299999999999, -0.08316199999999996],
    [0.614441,1.126779, 0.016562999999999994, 0.02900432087813476 ,0.054669999999999996, -0.11147499999999999],
    [0.618767,1.130246, 0.014985999999999944, 0.02050832660044044 ,0.050344000000000055, -0.1149420000000001],
    [0.623069,1.139302, 0.010885000000000034, 0.012727019099544323 ,0.04604200000000003, -0.12399800000000005],
    [0.642866,1.156793, 0.03482700000000005, 0.035810785616758656 ,0.026244999999999963, -0.14148899999999998],
    [0.667889,1.175293, 0.05344799999999994, 0.048487553964695174 ,0.0012220000000000564, -0.15998899999999994],
    [0.716552,1.223072, 0.030273999999999912, 0.023823984860674052 ,-0.047440999999999955, -0.20776799999999995],
    [0.715009,1.222271, 0.011790999999999996, 0.012523770136571688 ,-0.045897999999999994, -0.20696700000000012],
    [0.724231,1.225027, 0.010359999999999925, 0.0036216429127686744 ,-0.05511999999999995, -0.2097230000000001],
    [0.726492,1.226768, 0.0022610000000000685, 0.0011013908134285266 ,-0.057381000000000015, -0.2114640000000001]

])

v1 = Vector(Point(0,0), Point(-0.000476, 0.00028907))
v2 = Vector(Point(0,0), Point(0.079737, -0.130236))
print(v1.clockwise_angle_between(v2))
print(v1.clockwise_angle_between(v2) > np.pi)

x, y, hx, hy, rx, ry = real_set.T
plt.quiver(x, y, hx, hy, color='b')
plt.quiver(x, y, rx, ry, color='r')
plt.pause(0.05)

# plt.plot(0, 0, 'bo')
# plt.plot(v1[0], v1[1], 'ro')
# plt.plot(v2[0], v2[1], 'ro')
# plt.plot(0.002772, 0.00128472, 'bo')
# plt.plot(0.078554, 0.102219, 'bo')
# plt.pause(0.05)

input("Press Enter to continue...")
