from matplotlib import pyplot as plt
import numpy as np
from geometry.Point import Point
from geometry.Vector import Vector

waypoints = np.array([
    [0.221315,0.558516],
    [0.464738,1.03659],
    [0.744505,1.166092]
])

x, y = waypoints.T
fig = plt.figure(figsize=(8, 8))
plt.gca().set_aspect('equal', adjustable='box')
plt.scatter(x, y, marker='+')
plt.pause(0.05)

real_set = np.array([
    [0.212993,0.51462, -0.003484000000000015, 0.02898299999999998 ,0.008322000000000024, 0.043896000000000046],
    [0.22591,0.514047, 0.009432999999999997, 0.028410000000000046 ,0.23882799999999998, 0.5225429999999999],
    [0.239252,0.514746, 0.02277499999999999, 0.02910900000000005 ,0.225486, 0.5218439999999999],
    [0.267546,0.539826, 0.04747500000000002, 0.039868592688008686 ,0.19719199999999998, 0.4967639999999999],
    [0.281971,0.56002, 0.06549400000000002, 0.053404989685794435 ,0.18276699999999996, 0.47656999999999994],
    [0.301893,0.590072, 0.08890000000000003, 0.07635699352169245 ,0.16284499999999996, 0.44651799999999986],
    [0.318918,0.588219, 0.09300799999999998, 0.08625909550748567 ,0.14582, 0.44837099999999985],
    [0.332796,0.663576, 0.09354399999999999, 0.13071549471750754 ,0.131942, 0.37301399999999985],
    [0.314709,0.689637, 0.04716300000000001, 0.09092071769375631 ,0.15002899999999997, 0.34695299999999996],
    [0.313623,0.706937, -0.019172999999999996, 0.04336099999999998 ,0.151115, 0.32965299999999986],
    [0.329972,0.702908, -0.002823999999999993, 0.03933199999999992 ,0.134766, 0.3336819999999999],
    [0.317401,0.730334, -0.015394999999999992, 0.06675799999999998 ,0.147337, 0.30625599999999986],
    [0.326431,0.752236, 0.009030000000000038, 0.021901999999999977 ,0.13830699999999996, 0.2843539999999999],
    [0.3451,0.770419, 0.030391, 0.057707619666186205 ,0.11963799999999997, 0.26617099999999994],
    [0.350618,0.77951, 0.036995, 0.06419329202613788 ,0.11412, 0.25707999999999986],
    [0.381299,0.796307, 0.05132700000000001, 0.061881460504909946 ,0.08343899999999999, 0.2402829999999999],
    [0.403765,0.817835, 0.086364, 0.07981485932760268 ,0.060973, 0.21875499999999992],
    [0.412656,0.860774, 0.086225, 0.09178779954194471 ,0.05208199999999996, 0.17581599999999986],
    [0.432553,0.856934, 0.087453, 0.091449363155516 ,0.032184999999999964, 0.17965599999999993],
    [0.417869,0.927346, 0.067251, 0.09442237765842254 ,0.046868999999999994, 0.1092439999999999],
    [0.414659,0.970489, -0.0032099999999999906, 0.04314300000000004 ,0.050078999999999985, 0.06610099999999985],
    [0.419553,0.985716, 0.0016840000000000188, 0.05837000000000003 ,0.045184999999999975, 0.050873999999999864],
    [0.423109,0.988136, 0.0035560000000000036, 0.0024199999999999777 ,0.32139599999999996, 0.1779559999999999],
    [0.435448,0.98276, 0.015894999999999992, -0.0029560000000000697 ,0.30905699999999997, 0.18333199999999994],
    [0.457393,0.992649, 0.037839999999999985, 0.006932999999999967 ,0.287112, 0.1734429999999999],
    [0.46492,0.998051, 0.050261, 0.01841362247487177 ,0.279585, 0.16804099999999988],
    [0.456171,1.020059, 0.036617999999999984, 0.03434300000000001 ,0.288334, 0.14603299999999986],
    [0.436176,1.060621, -0.019994999999999985, 0.04056199999999999 ,0.30832899999999996, 0.10547099999999987],
    [0.441194,1.076547, -0.014977000000000018, 0.05648799999999987 ,0.303311, 0.08954499999999999],
    [0.456578,1.127443, 0.015384000000000009, 0.05089600000000005 ,0.287927, 0.03864899999999993],
    [0.508622,1.143628, 0.052044000000000035, 0.016185000000000116 ,0.23588299999999995, 0.022463999999999817],
    [0.483905,1.179301, -0.024717000000000044, 0.035672999999999844 ,0.2606, -0.013209000000000026],
    [0.4868,1.184687, 0.050624, 0.07436203293241395 ,0.25770499999999996, -0.01859500000000014],
    [0.529107,1.192301, 0.08791300000000002, 0.09420757068941077 ,0.21539799999999998, -0.02620900000000015],
    [0.561012,1.243338, 0.10443399999999997, 0.09423099168112636 ,0.18349300000000002, -0.07724600000000015],
    [0.574894,1.250729, 0.066272, 0.058915716949614616 ,0.16961099999999996, -0.08463700000000007],
    [0.600323,1.258879, 0.11641800000000008, 0.08548455606277638 ,0.14418199999999992, -0.09278700000000017],
    [0.602478,1.266135, 0.11567799999999995, 0.08730333641019983 ,0.14202700000000001, -0.1000430000000001],
    [0.622788,1.279882, 0.09368100000000001, 0.08037398129582485 ,0.12171699999999996, -0.11379000000000006],
    [0.643265,1.300211, 0.08225300000000002, 0.05537125836694723 ,0.10124, -0.1341190000000001],
    [0.642555,1.300787, 0.06766099999999997, 0.05240710675085025 ,0.10194999999999999, -0.134695],
    [0.646618,1.297179, 0.046294999999999975, 0.03980452920431787 ,0.09788699999999995, -0.13108700000000018],
    [0.647097,1.293609, 0.044619000000000075, 0.033020259130323026 ,0.09740799999999994, -0.1275170000000001],
    [0.64623,1.294693, 0.023441999999999963, 0.01618672072321048 ,0.098275, -0.1286010000000002],
    [0.647378,1.293821, 0.004113000000000033, -0.005953755221707491 ,0.09712699999999996, -0.1277290000000002],
    [0.644,1.301444, 0.0014450000000000296, -0.0023718379669861456 ,0.10050499999999996, -0.13535200000000014],
    [0.645479,1.30248, -0.0011390000000000011, 0.003021150470055689 ,0.09902599999999995, -0.13638800000000018],
    [0.648732,1.299741, 0.025943999999999967, 0.01985900000000007 ,0.095773, -0.13364900000000013],
    [0.661266,1.310025, 0.01503600000000005, 0.01003037416903041 ,0.08323899999999995, -0.1439330000000001]

])

v1 = Vector(Point(0,0), Point(-0.000476, 0.00028907))
v2 = Vector(Point(0,0), Point(0.079737, -0.130236))
print(v1.clockwise_angle_between(v2))
print(v1.clockwise_angle_between(v2) > np.pi)

x, y, hx, hy, rx, ry = real_set.T
plt.quiver(x, y, hx, hy, color='b')
plt.quiver(x, y, rx, ry, color='r')
plt.pause(0.05)

# plt.plot(0, 0, 'bo')
# plt.plot(v1[0], v1[1], 'ro')
# plt.plot(v2[0], v2[1], 'ro')
# plt.plot(0.002772, 0.00128472, 'bo')
# plt.plot(0.078554, 0.102219, 'bo')
# plt.pause(0.05)

input("Press Enter to continue...")
