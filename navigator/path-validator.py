from matplotlib import pyplot as plt
import numpy as np
from geometry.Point import Point
from geometry.Vector import Vector

waypoints = np.array([
    [0.109664,0.226586],
    [0.183259,0.441623],
    [0.339158,0.706729],
])

x, y = waypoints.T
fig = plt.figure(figsize=(8, 8))
plt.gca().set_aspect('equal', adjustable='box')
plt.scatter(x, y, marker='+')
plt.pause(0.05)

real_set = np.array([
    [0.137515, 0.389496, -0.017889, 0.029447,   0.045744, 0.052127],
    [0.106997, 0.438946, -0.017789, 0.02156591, 0.232161, 0.267783],
    [0.110269, 0.433306, -0.042263, 0.08255159, 0.228889, 0.273423],
    [0.121798, 0.46031,  -0.033606, 0.05487996, 0.217360, 0.246419],
    [0.115956, 0.483672, -0.021559, 0.02715404, 0.223202, 0.223057],
    [0.112746, 0.491428,  0.005749, 0.01061872, 0.226412, 0.215301],
    [0.109469, 0.496585, -0.003277, 0.005157,   0.229689, 0.210144],
    [0.121995, 0.496001,  0.000197, -0.0002861, 0.217163, 0.210728],
    [0.119639, 0.515804,  0.003683, 0.00312971, 0.219519, 0.190925],
    [0.134306, 0.52026,   0.02156,  0.02409386, 0.204852, 0.186469],
    [0.132298, 0.538033,  0.016945, 0.02571223, 0.206860, 0.168696],
    [0.132034, 0.567662,  0.022565, 0.04472269, 0.207124, 0.139067],
    [0.142394, 0.600122,  0.020399, 0.07628935, 0.196764, 0.106607],
    [0.189630, 0.696196,  0.057332, 0.14589723, 0.149528, 0.010533],
    [0.188273, 0.700683,  0.056239, 0.12298856, 0.150885, 0.006046],
    [0.182872, 0.711831,  0.028572, 0.04894711, 0.156286, -0.005102],
    [0.182717, 0.710182,  0.010912, 0.01619025, 0.156441, -0.003453],
    [0.183155, 0.71052,  -0.006475, 0.01351219, 0.156003, -0.003791],
    [0.180477, 0.711162,  0.008672, 0.039304,   0.158681, -0.004433],
    [0.183291, 0.711346,  0.011486, 0.039488,   0.155867, -0.004617],
    [0.183481, 0.710825,  0.000099, 0.000121,   0.155677, -0.004096],
    [0.183128, 0.710209,  0.011323, 0.038351,   0.156030, -0.00348],
    [0.185920, 0.717685,  0.002629, 0.00499065, 0.153238, -0.010956],
    [0.193191, 0.727949,  0.009761, 0.01621382, 0.145967, -0.02122],
    [0.194618, 0.727196,  0.012483, 0.01675079, 0.144540,-0.020467],
    [0.192200, 0.736608, -0.000991, 0.008659,   0.146958, -0.029879],
    [0.193299, 0.734993,  0.000108, 0.007044,   0.145859, -0.028264],
    [0.193684, 0.735149,  0.000493, 0.0072,     0.145474, -0.02842],
    [0.195303, 0.734065,  0.000685, -0.0010174, 0.143855, -0.027336],
    [0.193696, 0.735584, -0.001066, 0.00083088, 0.145462, -0.028855],
    [0.192249, 0.735876,  0.000049, -0.00000336, 0.146909, -0.029147],
    [0.200627, 0.755094,  0.007328, 0.01828829, 0.138531, -0.048365],
    [0.211215, 0.791478,  0.017531, 0.05482134, 0.127943, -0.084749]
])

v1 = Vector(Point(0,0), Point(0.046117, 0.09532723))
v2 = Vector(Point(0,0), Point(0.061343, 0.085243))
print(v1.angle_between(v2))
print(v1.angle_between(v2) > np.pi/16)

x, y, hx, hy, rx, ry = real_set.T
plt.quiver(x, y, hx, hy, color='b')
plt.quiver(x, y, rx, ry, color='r')
plt.pause(0.05)

# plt.plot(0, 0, 'bo')
# plt.plot(v1[0], v1[1], 'ro')
# plt.plot(v2[0], v2[1], 'ro')
# plt.plot(0.002772, 0.00128472, 'bo')
# plt.plot(0.078554, 0.102219, 'bo')
# plt.pause(0.05)

input("Press Enter to continue...")
