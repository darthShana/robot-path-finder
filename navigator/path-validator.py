from matplotlib import pyplot as plt
import numpy as np
from geometry.Point import Point
from geometry.Vector import Vector

waypoints = np.array([
    [-0.000458, -0.000361],
    [0.142214, 0.270564],
    [0.223221, 0.573814],
    [0.676189, 1.493873]
])

x, y = waypoints.T
fig = plt.figure(figsize=(8, 8))
plt.gca().set_aspect('equal', adjustable='box')
plt.scatter(x, y, marker='+')
plt.pause(0.05)

real_set = np.array([
    [-0.000464,-0.000454, -0.000464, -0.000454 ,5.999999999999983e-06, 9.299999999999998e-05],
    [-0.00037,0.000452, -0.00037, 0.000452 ,0.14258400000000002, 0.270112],
    [2.6e-05,-0.000174, 2.6e-05, -0.000174 ,0.142188, 0.27073800000000003],
    [0.000262,0.000267, 0.000262, 0.000267 ,0.141952, 0.270297],
    [0.000713,0.00184, 0.000713, 0.00184 ,0.14150100000000002, 0.268724],
    [0.000138,-0.00108, 0.000138, -0.00108 ,0.142076, 0.27164400000000005],
    [0.0006,-0.000893, 0.0006, -0.000893 ,0.14161400000000002, 0.271457],
    [0.000306,1.4e-05, 0.000306, 1.4e-05 ,0.141908, 0.27055],
    [0.001235,-0.000297, 0.001235, -0.000297 ,0.14097900000000002, 0.270861],
    [0.000423,-0.000634, 0.000423, -0.000634 ,0.141791, 0.27119800000000005],
    [0.000153,-0.00068, 0.000153, -0.00068 ,0.14206100000000002, 0.27124400000000004],
    [0.000618,-0.000351, 0.000618, -0.000351 ,0.141596, 0.270915],
    [3.4e-05,-0.000207, 3.4e-05, -0.000207 ,0.14218, 0.27077100000000004],
    [0.0005,0.00016, 0.0005, 0.00016 ,0.141714, 0.27040400000000003],
    [0.000889,0.000454, 0.000889, 0.000454 ,0.141325, 0.27011],
    [0.000423,-0.000116, 0.000423, -0.000116 ,0.141791, 0.27068000000000003],
    [0.000289,-2.5e-05, 0.000289, -2.5e-05 ,0.141925, 0.270589],
    [-0.00022,-0.000183, -0.00022, -0.000183 ,0.142434, 0.270747],
    [0.000865,0.000525, 0.000865, 0.000525 ,0.141349, 0.27003900000000003],
    [0.001402,0.000829, 0.001402, 0.000829 ,0.14081200000000002, 0.269735],
    [0.000199,0.000138, 0.000199, 0.000138 ,0.142015, 0.270426],
    [0.001116,0.002302, 0.001116, 0.002302 ,0.141098, 0.268262],
    [0.001241,0.00121, 0.001241, 0.00121 ,0.14097300000000001, 0.26935400000000004],
    [0.002425,0.003434, 0.002425, 0.003434 ,0.139789, 0.26713000000000003],
    [0.002369,0.004459, 0.002369, 0.004459 ,0.139845, 0.26610500000000004],
    [0.003202,0.004312, 0.003202, 0.004312 ,0.139012, 0.26625200000000004],
    [0.004015,0.005092, 0.004015, 0.005092 ,0.13819900000000002, 0.26547200000000004],
    [0.004387,0.006039, 0.004387, 0.006039 ,0.137827, 0.264525],
    [0.004584,0.009777, 0.004584, 0.009777 ,0.13763, 0.26078700000000005],
    [0.006901,0.011723, 0.006901, 0.011723 ,0.13531300000000002, 0.25884100000000004],
    [0.019397,0.023817, 0.019397, 0.023817 ,0.12281700000000001, 0.24674700000000002],
    [0.039052,0.045137, 0.035037000000000006, 0.03819213070895883 ,0.103162, 0.22542700000000004],
    [0.048572,0.059603, 0.044184999999999995, 0.05005820409174758 ,0.093642, 0.210961],
    [0.071873,0.085144, 0.067289, 0.07601377007074976 ,0.070341, 0.18542000000000003],
    [0.085952,0.099742, 0.079051, 0.08967705215347228 ,0.056262000000000006, 0.17082200000000003],
    [0.105697,0.115493, 0.0863, 0.09353070445686225 ,0.03651700000000001, 0.15507100000000001],
    [0.125423,0.131579, 0.086371, 0.08549131341398475 ,0.016791, 0.13898500000000003],
    [0.139284,0.145467, 0.09071199999999999, 0.08369143848500799 ,0.002930000000000016, 0.125097],
    [0.146135,0.153277, 0.07426199999999998, 0.0661831452066003 ,-0.00392099999999998, 0.11728700000000003],
    [0.147617,0.157355, 0.061665, 0.05629608654722802 ,-0.005402999999999991, 0.11320900000000003],
    [0.149766,0.158955, 0.04406900000000001, 0.04367995262620296 ,-0.007552000000000003, 0.11160900000000001],
    [0.149979,0.159196, 0.024555999999999994, 0.027899416063338373 ,-0.007764999999999994, 0.11136800000000002],
    [0.150261,0.158283, 0.024838, 0.026704000000000006 ,-0.008046999999999999, 0.11228100000000002],
    [0.149732,0.160657, 0.024308999999999997, 0.029077999999999993 ,-0.007517999999999997, 0.10990700000000003],
    [0.150206,0.159183, 0.024783, 0.02760399999999999 ,-0.007991999999999999, 0.11138100000000004],
    [0.149644,0.15897, 0.024220999999999993, 0.027391 ,-0.007429999999999992, 0.11159400000000003],
    [0.149979,0.159272, 0.024555999999999994, 0.027692999999999995 ,-0.007764999999999994, 0.11129200000000003],
    [0.150041,0.159076, 0.024618, 0.027496999999999994 ,-0.007827, 0.11148800000000003],
    [0.149947,0.159198, 0.02452399999999999, 0.027619000000000005 ,-0.00773299999999999, 0.11136600000000002],
    [0.149815,0.159122, 0.024391999999999997, 0.027543000000000012 ,-0.007600999999999997, 0.11144200000000001],
    [0.149835,0.15911, 0.02441199999999999, 0.027531 ,-0.007620999999999989, 0.11145400000000003],
    [0.149957,0.159494, 0.024534, 0.027914999999999995 ,-0.007743, 0.11107000000000003],
    [0.150086,0.160553, 0.02466299999999999, 0.028974 ,-0.00787199999999999, 0.11001100000000003],
    [0.149818,0.160914, 0.024395, 0.029335 ,-0.007604, 0.10965000000000003],
    [0.150224,0.160054, 0.02480099999999999, 0.028475 ,-0.00800999999999999, 0.11051000000000002],
    [0.150153,0.160621, 0.024730000000000002, 0.029042000000000012 ,-0.007939000000000002, 0.10994300000000001],
    [0.150226,0.159751, 0.02480299999999999, 0.028172000000000003 ,-0.008011999999999991, 0.11081300000000002],
    [0.153611,0.161871, 0.02818799999999999, 0.030291999999999986 ,-0.01139699999999999, 0.10869300000000004],
    [0.158849,0.182932, 0.033425999999999984, 0.05135300000000001 ,-0.016634999999999983, 0.08763200000000002],
    [0.165292,0.191995, 0.015067999999999998, 0.03375448761099059 ,-0.023077999999999987, 0.07856900000000003],
    [0.166045,0.191667, 0.01589199999999999, 0.034135957551970075 ,-0.02383099999999999, 0.07889700000000002],
    [0.167604,0.192366, 0.017378000000000005, 0.036030470805505865 ,-0.025389999999999996, 0.07819800000000002],
    [0.167316,0.192703, 0.013704999999999995, 0.028226908589592092 ,-0.025101999999999985, 0.07786100000000001],
    [0.168131,0.192928, 0.009282000000000012, 0.009995999999999977 ,-0.025916999999999996, 0.07763600000000004],
    [0.168464,0.194129, 0.009615000000000012, 0.011196999999999985 ,-0.026249999999999996, 0.07643500000000003],
    [0.168461,0.194265, 0.00961200000000001, 0.011332999999999982 ,-0.026246999999999993, 0.07629900000000003],
    [0.166038,0.206601, 0.007189000000000001, 0.023668999999999996 ,-0.023823999999999984, 0.06396300000000002],
    [0.159005,0.216166, 0.00015600000000001724, 0.033233999999999986 ,-0.016791, 0.05439800000000003],
    [0.148445,0.222698, -0.01968600000000001, 0.02907323182422958 ,-0.0062309999999999865, 0.04786600000000002],
     [0.15158,0.225675, -0.01688400000000001, 0.025151939430192394 ,0.07164100000000001, 0.3481390000000001],
     [0.159092,0.24416, 0.00024300000000002098, 0.06122799999999998 ,0.06412899999999999, 0.32965400000000006],
     [0.158748,0.276622, -0.00034400000000001096, 0.03246199999999999 ,0.064473, 0.29719200000000007],
     [0.158399,0.302958, -0.0006929999999999992, 0.05879800000000002 ,0.06482199999999999, 0.27085600000000004],
     [0.172996,0.346785, 0.024551000000000017, 0.12842485082416644 ,0.05022499999999999, 0.22702900000000004],
     [0.18016,0.360896, 0.028579999999999994, 0.13288342812520992 ,0.043061000000000016, 0.21291800000000005],
     [0.182918,0.416586, 0.023825999999999986, 0.12079462416200804 ,0.040303000000000005, 0.15722800000000003],
     [0.223216,0.468951, 0.064468, 0.1810133764805849 ,5.0000000000050004e-06, 0.10486300000000004],
     [0.24772,0.509762, 0.08932099999999998, 0.19903177347628326 ,-0.024498999999999993, 0.064052],
     [0.244731,0.512838, 0.071735, 0.14822377042010382 ,-0.02151, 0.06097600000000003],
     [0.25751,0.535004, 0.07735000000000003, 0.1484199864952721 ,-0.034289000000000014, 0.03881000000000001],
     [0.272107,0.539657, 0.08918899999999999, 0.13137282756939728 ,-0.048885999999999985, 0.03415699999999999],
     [0.270762,0.636982, 0.047546000000000005, 0.11809902274798412 ,-0.047541, -0.063168],
     [0.241813,0.668137, -0.028949000000000003, 0.031154999999999933 ,-0.018591999999999997, -0.09432299999999993],
     [0.21774,0.693772, -0.026991000000000015, 0.053358258723540386 ,0.005481000000000014, -0.11995800000000001]
])

v1 = Vector(Point(0,0), Point(-0.000476, 0.00028907))
v2 = Vector(Point(0,0), Point(0.079737, -0.130236))
print(v1.clockwise_angle_between(v2))
print(v1.clockwise_angle_between(v2) > np.pi)

p1 = Point(0.091812, 0.03647197234736366)
p2 = Point(-0.00042799999999998395, -0.000600009779178956)

print(Point(0, 0).distance(p1))
print(Point(0, 0).distance(p2))

x, y, hx, hy, rx, ry = real_set.T
plt.quiver(x, y, hx, hy, color='b')
plt.quiver(x, y, rx, ry, color='r')
plt.pause(0.05)

# plt.plot(0, 0, 'bo')
# plt.plot(v1[0], v1[1], 'ro')
# plt.plot(v2[0], v2[1], 'ro')
# plt.plot(0.002772, 0.00128472, 'bo')
# plt.plot(0.078554, 0.102219, 'bo')
# plt.pause(0.05)

input("Press Enter to continue...")
